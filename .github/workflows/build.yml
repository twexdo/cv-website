name: Build and Push to Build Branch

on:
  push:
    branches:
      - master  # Trigger the workflow on pushes to the main branch

jobs:
  build-and-push:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up Node.js 16
        uses: actions/setup-node@v3
        with:
          node-version: '16'

      - name: Install dependencies
        run: npm install

      - name: Build project
        run: npm run build

      - name: Set up Git
        run: |
          git config --global user.name 'Adrian'
          git config --global user.email 'adiupm@gmail.com'

      - name: Git Commit and Push w/ Force Push
        # You may pin to the exact commit or the version.
        # uses: dciborow/commit@a453a2bd73865875107dd85a471a21369d0a12d8
        uses: dciborow/commit@0.0.1
        with:
          # Github Token with commit access
          github-token: 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
          # Override branch to push to
          push-branch: build
          # Specify commit message
          commit-message: Auto build
          # Force add files, useful for adding ignored files.
          force-add: true
          # Force push
          force-push: true
          # Pull and rebase before commiting. Useful when using commit inside matrix.
          rebase: true
          # Specific files to add.
      
          # Committer email. Default is ${name}@users.noreply.github.com
          email: adiupm@gmail.com
          # Committer name. Default is name of the person or app that initiated the workflow.
          name: Adrian-bot
          
